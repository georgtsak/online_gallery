@model HomeModel

@{
    ViewData["Title"] = "Home Page";
}
@{
    Layout = "_Layout";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"> <!-- icons -->

<!-- ***************************************************** carousel ****** -->

<div class="row justify-content-center fullscreen align-items-center">
    <div class="col-lg-5 col-md-8 home-banner-left">
        <div id="textCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <h1 class="text-white">Text text 1</h1>
                    <p class="mx-auto text-white mt-20 mb-40">
                        text text text text text text text text text text text text text  text text text text text text text text text text
                    </p>
                </div>
                <div class="carousel-item">
                    <h1 class="text-white">Text text 2</h1>
                    <p class="mx-auto text-white mt-20 mb-40">
                        text text text text text text text text text text text text text  text text text text text text text text text text
                    </p>
                </div>
                <div class="carousel-item">
                    <h1 class="text-white">Text text 3</h1>
                    <p class="mx-auto text-white mt-20 mb-40">
                        text text text text text text text text text text text text text  text text text text text text text text text text
                    </p>
                </div>
            </div>
            <a class="carousel-control-prev" href="#textCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#textCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

</div>

<!-- ************************************************** top artists ****** -->

<div class="py-5">
    <h3 class="text-center mb-2">Top 5 Artists</h3>

    <div class="rounded mb-2" style="background-color: rgba(05,0,0,0.8); width: 100%;">
        <div class="container py-5">
            <div class="row justify-content-center">
                @foreach (var artist in Model.TopArtists)
                {
                    <div class="col-md-2 text-center mx-2 mb-0">
                        <img src="@artist.SampleArtwork?.ImageUrl" class="rounded mb-2"
                             style="width: 170px; height: 170px; object-fit: cover;" />
                        <h5>@artist.Artist.FullName</h5>
                        <p>sales: @artist.SalesCount </p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!-- ******************************* recent artworks of top artists ****** -->

<div class="container mt-5">
    <h3 class="text-center mb-2">Recent Artworks by Top Artists</h3>

    <div class="position-relative">
        <div class="d-flex overflow-hidden" id="artworkSlider" style="scroll-behavior: smooth;">
            @foreach (var artwork in Model.RecentArtworks)
            {
                <div class="card m-2 flex-shrink-0" style="width: 250px;">
                    <img src="@artwork.ImageUrl" class="card-img-top" alt="@artwork.Title" style="height: 200px; object-fit: cover;">
                    <div class="card-body text-center">
                        <h5 class="card-title">@artwork.Title</h5>
                        <p class="card-text">€@artwork.Price</p>
                        <button type="button" class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#artworkModal-@artwork.Id">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                </div>
                @await Html.PartialAsync("_ArtworksModal", artwork)
            }
        </div>
    </div>
</div>

<script>
    const slider = document.getElementById('artworkSlider');
    const cardWidth = 250 +10; // card + margin
    let autoScroll;

    // klwnopoihsh twn cards sto telos tou slider
    // apofugh reverse animation
    window.addEventListener('DOMContentLoaded', () => {
        const cards = slider.children;
        const visibleCardsCount = Math.floor(slider.offsetWidth / cardWidth);

        for (let i = 0; i < visibleCardsCount; i++) {
            const clone = cards[i].cloneNode(true);
            slider.appendChild(clone);
        }

        startAutoScroll();
    });

    function scrollSlider() {
        slider.scrollLeft += cardWidth;

        if (slider.scrollLeft >= slider.scrollWidth - slider.offsetWidth) {
            setTimeout(() => {
                slider.style.scrollBehavior = 'auto';
                slider.scrollLeft = 0;

                setTimeout(() => {
                    slider.style.scrollBehavior = 'smooth';
                }, 50);
            }, 300);
        }
    }

    function startAutoScroll() {
        autoScroll = setInterval(scrollSlider, 1000);
    }

    function stopAutoScroll() {
        clearInterval(autoScroll);
    }

    slider.addEventListener('mouseenter', stopAutoScroll);
    slider.addEventListener('mouseleave', startAutoScroll);
</script>

<script src="js/owl.carousel.min.js"></script>
<link rel="stylesheet" href="css/carousel.css" />


